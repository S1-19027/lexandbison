# SysY语言编译器实验实施计划

## 项目概述
本项目旨在实现一个SysY语言的编译器前端，包括词法分析器、语法分析器和语义分析器。SysY语言是C语言的一个子集，支持int/float类型、多维数组、函数定义等特性。

## 实验任务分解

### 1. SysY语言文法规范分析（已完成）
- **目标**：深入理解SysY2022版语言规范
- **内容**：
  - 分析EBNF文法规则
  - 理解语法成分的作用和组合方式
  - 掌握语义约束条件
  - 熟悉词法单元定义

### 2. 词法分析器设计与实现
- **目标**：实现SysY源代码的词法分析
- **技术选型**：使用GNU Flex工具
- **主要任务**：
  - 定义词法单元类型编码
  - 编写正则表达式规则
  - 实现错误检测（错误类型A）
  - 支持八进制/十六进制常数识别
  - 输出词法单元二元组

### 3. 语法分析器设计与实现
- **目标**：在词法分析基础上实现语法分析
- **技术选型**：使用GNU Bison工具
- **主要任务**：
  - 构建语法分析树
  - 实现语法错误检测（错误类型B）
  - 支持先序遍历输出
  - 处理ε产生式

### 4. 测试程序开发
- **目标**：编写覆盖所有语法规则的测试用例
- **要求**：
  - 5-10个测试程序
  - 覆盖简单和复杂语法结构
  - 首行输出学号/队伍编码
  - 保存为.sy文件格式

### 5. 验证与测试
- **目标**：确保实现的正确性
- **任务**：
  - 验证测试程序通过gcc编译
  - 测试词法/语法错误检测功能
  - 验证输出格式符合要求

## 技术架构设计

### 词法分析器架构
```
输入文件(.sy) → Flex词法分析器 → 词法单元流 → 语法分析器
```

### 语法分析器架构
```
词法单元流 → Bison语法分析器 → 语法分析树 → 先序遍历输出
```

## 关键实现细节

### 词法单元类型定义
需要定义以下主要词法单元：
- 关键字：INTTK, FLOATTK, VOID, CONST, IF, ELSE, WHILE, BREAK, CONTINUE, RETURN
- 标识符：ID
- 常数：INTCON, FLOATCON
- 运算符：PLUS, MINUS, MUL, DIV, MOD, ASSIGN, EQ, NEQ, LT, GT, LEQ, GEQ, AND, OR, NOT
- 分隔符：LPARENT, RPARENT, LBRACKET, RBRACKET, LBRACE, RBRACE, SEMICN, COMMA

### 错误处理策略
- **词法错误（类型A）**：未定义字符、非法八进制/十六进制数
- **语法错误（类型B）**：语法规则违反、缺少分号/括号等

### 输出格式规范
- **错误信息**：`Error type [A/B] at Line [行号]: [说明文字]`
- **词法单元**：`<词法单元类型, 属性值>`
- **语法树**：先序遍历，包含语法单元名称和行号

## 实施时间线

1. **第一阶段**：词法分析器实现（1-2周）
2. **第二阶段**：语法分析器实现（2-3周）
3. **第三阶段**：测试程序开发（1周）
4. **第四阶段**：集成测试和报告撰写（1周）

## 风险与应对

- **风险**：正则表达式设计复杂
  - **应对**：分模块测试，逐步完善
- **风险**：语法分析树构建困难
  - **应对**：参考示例输出，确保格式正确
- **风险**：错误恢复策略实现
  - **应对**：采用简单的错误恢复机制

## 预期成果

1. 完整的词法分析器源代码
2. 完整的语法分析器源代码
3. 5-10个测试程序
4. 实验报告文档
5. 可执行的编译器前端程序

这个计划为SysY语言编译器的实现提供了清晰的路线图，每个阶段都有明确的目标和交付物。